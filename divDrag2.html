<!DOCTYPE html>
<html>
<head>
<meta charset=" utf-8">
<meta name="author" content="http://www.softwhy.com/" />
<title>div width resize</title>
<style type="text/css">
html,body{width:100%;height: 100%}
html, body, div {
  margin: 0;
  padding: 0;
  border: 0;
  -moz-user-select: none;
  -webkit-user-select: none;
}
.gf_s {
  float:left;
  width:4px;
  cursor:e-resize;
  background-color:#fff;
  border:#99BBE8 1px solid;
}
.gf_s_g {
  float: left;
  width: 4px;
  display: none;
  cursor: e-resize;
  position: absolute;
  background-color: #F0F0F0;
  border: #99BBE8 1px solid;
  filter: alpha(opacity=60);
  opacity: 0.6;
  opacity: 0.6;
  z-index: 1000;
}
</style>
<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
<script type="text/javascript">
var $sliderMoving = false;
var scale={l:0.15,r:0.85};

function mousePosition(ev) {
  if (!ev) ev = window.event;
  if (ev.pageX || ev.pageY) {
    return { x: ev.pageX, y: ev.pageY };
  }
  return {
    x: ev.clientX + document.documentElement.scrollLeft - document.body.clientLeft,
    y: ev.clientY + document.documentElement.scrollTop - document.body.clientTop
  };
};
function getElCoordinate(dom) {
  var t = dom.offsetTop;
  var l = dom.offsetLeft;
  dom = dom.offsetParent;
  while (dom) {
    t += dom.offsetTop;
    l += dom.offsetLeft;
    dom = dom.offsetParent;
  };
  return { top: t, left: l };
};
 
function sliderGhostMoving(e) {
  $("#divSG").css({ left: mousePosition(e).x , display: "block" });
};
function sliderHorizontalMove(e) {
  var lWidth = getElCoordinate($("#divSG")[0]).left;
  var rWidth = $("#divP")[0].clientWidth - lWidth - 6;
  var width = $("#divP")[0].clientWidth - 6;
  var lScale=lWidth/width;
  var rScale=rWidth/width;
  $("#divLeft").css("width", lWidth + "px");
  $("#divRight").css("width", rWidth + "px");
  $("#divSG").css("display", "none");
  return {l:lScale,r:rScale}
};
 
function initSize(lScale,rScale) {
  var width = $("#divP")[0].clientWidth-6;
  var height = $("#divP").height();
  
  $("#divLeft").css({ height: height + "px", width: width *lScale + "px" });
  $("#divS").css({ height: height - 2 + "px", width: "4px" });
  $("#divSG").css({ height: height - 2 + "px", width: "4px" });
  $("#divRight").css({ height: height + "px", width: width * rScale + "px" });
}

$(document).ready(function () {
  
  initSize(0.15,0.85);
  $("#divS").on("mousedown", function (e) {
    $sliderMoving = true;
    $("#divP").css("cursor", "e-resize");
  });
 
  $("#divP").on("mousemove", function (e) {
    if ($sliderMoving) {
      sliderGhostMoving(e);
    }
  });
 
  $("#divP").on("mouseup", function (e) {
    if ($sliderMoving) {
      $sliderMoving = false;
      scale=sliderHorizontalMove(e);
      console.log(scale);
      $("#divP").css("cursor", "default");
    }
  });
  
});
$(window).resize(function () {
  
  initSize(scale.l,scale.r);
  
});
function leftAnimate(){
   var width = $("#divP")[0].clientWidth- 8;
   console.log(width);
   
   $("#divLeft").animate({
      width:width*0.15+"px"
   },1000);
  // setTimeout(function(){
    $("#divRight").animate({
      width:width*0.85+"px"
   },1000);
  //},20)
}
function rightAnimate(){
  var width = $("#divP")[0].clientWidth- 8;
   console.log($("#divP")[0]);
  $("#divRight").animate({
      width:width*scale.r+"px"
   },1000);
  // setTimeout(function(){
     $("#divLeft").animate({
      width:width*scale.l+"px"
    },1000);
   //},20)
   
}

  
</script>
</head>
<body >
<div id="divP" style="width:100%; height:50%;overflow: auto">
  <div id="divLeft" style="background-color:green;float:left;display:inline-block">
    <span style="color:red;font-size: 30px;float: right;" onclick="rightAnimate()">>></span>
  </div>
  <div id="divS" class="gf_s" style="float:left;"></div>
  <div id="divSG" class="gf_s_g" style="float:left;"></div>
  <div id="divRight" style="background-color:blue;float:left;display:inline-block">
    <span style="color:red;font-size: 30px;" onclick="leftAnimate()"><<</span>
  </div>
  <div style="clear: both"></div>
</div>
</body>
</html>