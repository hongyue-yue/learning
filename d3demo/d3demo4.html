<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title></title>
	<!--<script type="text/javascript" src="https://cdn.bootcss.com/d3/4.5.1/d3.js"></script>-->
  <script type="text/javascript" src="https://cdn.bootcss.com/d3/3.5.10/d3.js"></script>
  <style type="text/css">
      
  </style>
</head>
<body>
  
<script type="text/javascript">
/*   //画布大小
   var width = 500;
   var height = 500;
   //在 body 里添加一个 SVG 画布   
   var svg = d3.select("body")
               .append("svg")
               .attr("width", width)
               .attr("height", height);
   var dataset = [ 30 , 10 , 43 , 55 , 13 ];
   var pie = d3.pie();
   var piedata = pie(dataset);
   var outerRadius = 150; //外半径
   var innerRadius = 0; //内半径，为0则中间没有空白
   var color = d3.scaleOrdinal(d3.schemeCategory10);   //有十种颜色的颜色比例尺
   var arc = d3.arc()  //弧生成器
               .innerRadius(innerRadius)   //设置内半径
               .outerRadius(outerRadius);  //设置外半径
   var arcs = svg.selectAll("g")
                 .data(piedata)
                 .enter()
                 .append("g")
                 .attr("transform","translate("+ (width/2) +","+ (width/2) +")");

       arcs.append("path")
           .attr("fill",function(d,i){
               return color(i);
           })
           .attr("d",function(d){
               return arc(d);   //调用弧生成器，得到路径值
           });
   

   arcs.append("text")
       .attr("transform",function(d){
           return "translate(" + arc.centroid(d) + ")";
       })
       .attr("text-anchor","middle")
       .text(function(d){
           return d.data;
       });*/
</script>
<script type="text/javascript">
      //画布大小
   var width = 500;
   var height = 500;
   //在 body 里添加一个 SVG 画布   
   var svg = d3.select("body")
               .append("svg")
               .attr("width", width)
               .attr("height", height);
   var dataset = [ 30 , 10 , 43 , 55 , 13 ];
   var pie = d3.layout.pie();
   var piedata = pie(dataset);
   var outerRadius = 150; //外半径
   var innerRadius = 0; //内半径，为0则中间没有空白
   var color = d3.scale.category10();   //有十种颜色的颜色比例尺
   var arc = d3.svg.arc()  //弧生成器
               .innerRadius(innerRadius)   //设置内半径
               .outerRadius(outerRadius);  //设置外半径

   var arcs = svg.selectAll("g")
                 .data(piedata)
                 .enter()
                 .append("g")
                 .attr("transform","translate("+ (width/2) +","+ (width/2) +")");

       arcs.append("path")
           .attr("fill",function(d,i){
               return color(i);
           })
           .attr("d",function(d){
               return arc(d);   //调用弧生成器，得到路径值
           })
           .on("mouseover",function(d){
                 console.log(arc.centroid(d))
                 d3.select(d3.event.path[1])
                   .transition()
                   .duration(100)
                   .attr("transform",function(d){
                       return "translate(" +(arc.centroid(d)[0]/3+width/2)+ ","+ (arc.centroid(d)[1]/3+width/2)+")";
                   })
           })
           .on("mouseout",function(){
                d3.select(d3.event.path[1])
                   .transition()
                   .duration(100)
                   .attr("transform","translate("+ (width/2) +","+ (width/2) +")")
           })
       arcs.append("text")
           .attr("transform",function(d){
               return "translate(" + arc.centroid(d) + ")";
           })
           .attr("text-anchor","middle")
           .text(function(d){
               return d.data;
           })
           
</script>
</body>
</html>